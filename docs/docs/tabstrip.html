<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tabstrip" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Animating Tab Strip | Doodle Tutorials</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacular.github.io/doodle-tutorials/img/site_preview.png"><meta data-rh="true" name="twitter:image" content="https://nacular.github.io/doodle-tutorials/img/site_preview.png"><meta data-rh="true" property="og:url" content="https://nacular.github.io/doodle-tutorials/docs/tabstrip"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image:width" content="380"><meta data-rh="true" name="og:image:height" content="78"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Animating Tab Strip | Doodle Tutorials"><meta data-rh="true" name="description" content="TabStrip Tutorial"><meta data-rh="true" property="og:description" content="TabStrip Tutorial"><link data-rh="true" rel="icon" href="/doodle-tutorials/img/favicon.png"><link data-rh="true" rel="canonical" href="https://nacular.github.io/doodle-tutorials/docs/tabstrip"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle-tutorials/docs/tabstrip" hreflang="en"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle-tutorials/docs/tabstrip" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KN5YH7BJYG"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KN5YH7BJYG",{anonymize_ip:!0})</script>



<script src="https://unpkg.com/kotlin-playground@1"></script><link rel="stylesheet" href="/doodle-tutorials/assets/css/styles.e0f3fa19.css">
<script src="/doodle-tutorials/assets/js/runtime~main.55ea7b53.js" defer="defer"></script>
<script src="/doodle-tutorials/assets/js/main.d59930e9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doodle-tutorials/"><div class="navbar__logo"><img src="/doodle-tutorials/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doodle-tutorials/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nacular/doodle-tutorials" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://kotlinlang.slack.com/messages/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/animatingform">Animating Form</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/timedcards">Timed Cards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doodle-tutorials/docs/tabstrip">Animating Tab Strip</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/contacts">Contacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/calculator">Calculator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/todo">Todo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/photos">Photos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle-tutorials/docs/photostream">Photo Stream</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1><a class="inline-github-link" href="https://github.com/nacular/doodle-tutorials/tree/master/TabStrip" target="_blank">TabStrip Tutorial</a></h1>
<p>We will build a simple app that hosts animating tab selection component in this tutorial. It is inspired by <a href="https://dribbble.com/shots/14723171-Animated-Tabbar" target="_blank" rel="noopener noreferrer">Cuberto&#x27;s Animated Tabbar</a> and this <a href="https://codepen.io/aaroniker/pen/rNMmZvq?editors=0110" target="_blank" rel="noopener noreferrer">JS impl</a>. This app will be multi-platform, which means it will run in the browser and as a desktop application.</p>
<p>The main focus will be utilizing <a href="https://nacular.github.io/doodle/docs/animations" target="_blank" rel="noopener noreferrer">Doodle&#x27;s powerful animation APIs</a> to create smooth transitions with precise timings.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also see the full-screen app here: <a href="https://nacular.github.io/doodle-tutorials/tabstrip" target="_blank" rel="noopener noreferrer">JavaScript</a>, <a href="https://nacular.github.io/doodle-tutorials/tabstrip_wasm" target="_blank" rel="noopener noreferrer">WebAssembly</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-setup">Project Setup<a href="#project-setup" class="hash-link" aria-label="Direct link to Project Setup" title="Direct link to Project Setup">​</a></h2>
<p>The app will use a Kotlin Multiplatform setup, which means we can run it on a range of targets supported by Doodle. The directory structure follows a fairly common layout, with common classes and resources in one source set and platform-specific items in their own.</p>
<!-- -->
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Directory Layout</div><div class="admonitionContent_BuS1"><div style="display:flex"><style data-emotion="css 13s4dk6">.css-13s4dk6{min-width:250px;}</style><div class="MuiBox-root css-13s4dk6"><style data-emotion="css 1q7nh3k">.css-1q7nh3k{padding:0;margin:0;list-style:none;outline:0;position:relative;}</style><ul role="tree" style="--TreeView-itemChildrenIndentation:12px" aria-multiselectable="false" class="MuiRichTreeView-root css-1q7nh3k"><style data-emotion="css ljgrlg">.css-ljgrlg{list-style:none;margin:0;padding:0;outline:0;}</style><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-expanded="true" aria-selected="true" id="-src" tabindex="0"><style data-emotion="css zgkbnr">.css-zgkbnr{padding:4px 8px;border-radius:4px;width:100%;box-sizing:border-box;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;cursor:pointer;-webkit-tap-highlight-color:transparent;}.css-zgkbnr:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.css-zgkbnr:hover{background-color:transparent;}}.css-zgkbnr.Mui-disabled{opacity:0.38;background-color:transparent;}.css-zgkbnr.Mui-focused{background-color:rgba(0, 0, 0, 0.12);}.css-zgkbnr.Mui-selected{background-color:rgba(25, 118, 210, 0.08);}.css-zgkbnr.Mui-selected:hover{background-color:rgba(25, 118, 210, 0.12);}@media (hover: none){.css-zgkbnr.Mui-selected:hover{background-color:rgba(25, 118, 210, 0.08);}}.css-zgkbnr.Mui-selected.Mui-focused{background-color:rgba(25, 118, 210, 0.2);}.css-zgkbnr .MuiTreeItem-iconContainer{width:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-zgkbnr .MuiTreeItem-iconContainer svg{font-size:18px;}.css-zgkbnr .MuiTreeItem-label{width:100%;box-sizing:border-box;min-width:0;position:relative;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}.css-zgkbnr .MuiTreeItem-checkbox{padding:0;}</style><div class="MuiTreeItem-content css-zgkbnr Mui-expanded Mui-selected"><div class="MuiTreeItem-iconContainer"><style data-emotion="css q7mezt">.css-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TreeViewCollapseIconIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div><div class="MuiTreeItem-label">src</div></div><style data-emotion="css gadsb9">.css-gadsb9{margin:0;padding:0;padding-left:var(--TreeView-itemChildrenIndentation);}</style><style data-emotion="css 1eefoa2">.css-1eefoa2{height:0;overflow:hidden;-webkit-transition:height 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:height 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;height:auto;overflow:visible;margin:0;padding:0;padding-left:var(--TreeView-itemChildrenIndentation);}</style><ul class="MuiCollapse-root MuiCollapse-vertical MuiTreeItem-groupTransition MuiCollapse-entered css-1eefoa2" style="min-height:0px" role="group"><style data-emotion="css 15830to">.css-15830to{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}</style><div class="MuiCollapse-wrapper MuiCollapse-vertical css-15830to"><style data-emotion="css 9vd5ud">.css-9vd5ud{width:100%;}</style><div class="MuiCollapse-wrapperInner MuiCollapse-vertical css-9vd5ud"><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-expanded="true" aria-selected="false" id="-src/commonMain" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr Mui-expanded"><div class="MuiTreeItem-iconContainer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TreeViewCollapseIconIcon"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg></div><div class="MuiTreeItem-label">commonMain</div></div><ul class="MuiCollapse-root MuiCollapse-vertical MuiTreeItem-groupTransition MuiCollapse-entered css-1eefoa2" style="min-height:0px" role="group"><div class="MuiCollapse-wrapper MuiCollapse-vertical css-15830to"><div class="MuiCollapse-wrapperInner MuiCollapse-vertical css-9vd5ud"><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-selected="false" id="-src/commonMain/kotlin" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr"><div class="MuiTreeItem-iconContainer"></div><div class="MuiTreeItem-label">kotlin</div></div></li></div></div></ul></li><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-expanded="false" aria-selected="false" id="-src/jsMain" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr"><div class="MuiTreeItem-iconContainer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TreeViewExpandIconIcon"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></div><div class="MuiTreeItem-label">jsMain</div></div></li><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-expanded="false" aria-selected="false" id="-src/jvmMain" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr"><div class="MuiTreeItem-iconContainer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TreeViewExpandIconIcon"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></div><div class="MuiTreeItem-label">jvmMain</div></div></li><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-expanded="false" aria-selected="false" id="-src/wasmJsMain" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr"><div class="MuiTreeItem-iconContainer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="TreeViewExpandIconIcon"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></div><div class="MuiTreeItem-label">wasmJsMain</div></div></li></div></div></ul></li><li class="MuiTreeItem-root css-ljgrlg" role="treeitem" aria-selected="false" id="-build.gradle.kts" tabindex="-1"><div class="MuiTreeItem-content css-zgkbnr"><div class="MuiTreeItem-iconContainer"></div><div class="MuiTreeItem-label">build.gradle.kts</div></div></li></ul></div><div style="margin-left:1em"><div value="src"><p>All source code and resources are located under the <code>src</code> directory.</p><p>The application logic itself is located in the common source set (<code>src/commonMain</code>), which means it is entirely reused for each platform. In fact, the same app is used unchanged (just targeting JS) within this documentation.</p></div><div value="src/commonMain" hidden=""><p>Source code and resources for that are usable for platforms are stored in <code>commonMain</code>. This app is designed to work on all platforms, so our app code and all logic is found under this directory.</p></div><div value="src/commonMain/kotlin" hidden=""><p>The <code>kotlin</code> directory is where all code for a platform resides. In this case, we have all the classes for our app: <code>TabStripApp</code> and <code>TabStrip</code>.</p><p>All of these classes are platform agnostic and used by all targets. This makes our app work on any target Doodle supports.</p></div><div value="src/jsMain" hidden=""><p>Source code and resources that are needed for Web (JS) target are stored in <code>jsMain</code>. Our app is platform agnostic except for the launch portion, which is located in the source below this directory.</p></div><div value="src/jsMain/kotlin" hidden=""><p>The Web launch portion of our app is located here in the program&#x27;s <code>main</code> function.</p></div><div value="src/jsMain/resources" hidden=""><p>Holds the <code>index.html</code> file that loads the generated JS file produced for the Web (JS) target.</p></div><div value="src/jvmMain" hidden=""><p>Source code and resources that are needed for Desktop (JVM) target are stored in <code>jvmMain</code>.</p></div><div value="src/jvmMain/kotlin" hidden=""><p>The Desktop launch portion of our app is located here in the program&#x27;s <code>main</code> function.</p></div><div value="src/wasmJsMain" hidden=""><p>Source code and resources that are needed for Web (WASM) target are stored in <code>wasmJsMain</code>. Our app is platform agnostic except for the launch portion, which is located in the source below this directory.</p></div><div value="src/wasmJsMain/kotlin" hidden=""><p>The Web launch portion of our app is located here in the program&#x27;s <code>main</code> function.</p></div><div value="src/wasmJsMain/resources" hidden=""><p>Holds the <code>index.html</code> file that loads the generated JS file produced for the Web (WASM) target.</p></div><div value="build.gradle.kts" hidden=""><p>The <code>build.gradle.kts</code> file defines how the app is configured and all its dependencies. The TabStrip app uses a multi-platform configuration so it can run on all Doodle supported targets.</p></div></div></div></div></div>
<p>Doodle apps are built using gradle like other Kotlin apps. The build is controlled by the <code>build.gradle.kts</code> script in the root of the <code>TabStrip</code> directory.</p>
<p><strong>build.gradle.kts</strong></p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">@file:Suppress(&quot;OPT_IN_USAGE&quot;)

import org.jetbrains.kotlin.gradle.dsl.JvmTarget.JVM_11


//sampleStart
plugins {
    kotlin(&quot;multiplatform&quot;)
}

kotlin {
    js     { browser { binaries.executable() } }                               // Web     (JS  ) executable
    wasmJs { browser { binaries.executable() } }                               // Web     (WASM) executable
    jvm    {                                                                   // Desktop (JVM ) executable
        compilerOptions { jvmTarget.set(JVM_11) }                              // JVM 11 is needed for Desktop
        mainRun         { mainClass.set(&quot;io.nacular.doodle.examples.MainKt&quot;) } // Desktop entry point
    }

    sourceSets {
        // Source set for all platforms
        commonMain.dependencies {
            api(libs.doodle.animation)
        }

        // Web (JS) platform source set
        jsMain.dependencies {
            implementation(libs.doodle.browser)
        }

        // Web (WASM) platform source set
        val wasmJsMain by getting {
            dependencies {
                implementation(libs.doodle.browser)
            }
        }

        // Desktop (JVM) platform source set
        jvmMain.dependencies {
            // helper to derive OS/architecture pair
            when (osTarget()) {
                &quot;macos-x64&quot;     -&gt; implementation(libs.doodle.desktop.jvm.macos.x64    )
                &quot;macos-arm64&quot;   -&gt; implementation(libs.doodle.desktop.jvm.macos.arm64  )
                &quot;linux-x64&quot;     -&gt; implementation(libs.doodle.desktop.jvm.linux.x64    )
                &quot;linux-arm64&quot;   -&gt; implementation(libs.doodle.desktop.jvm.linux.arm64  )
                &quot;windows-x64&quot;   -&gt; implementation(libs.doodle.desktop.jvm.windows.x64  )
                &quot;windows-arm64&quot; -&gt; implementation(libs.doodle.desktop.jvm.windows.arm64)
            }
        }
    }
}
//sampleEnd

// could be moved to buildSrc, but kept here for clarity
fun osTarget(): String {
    val osName = System.getProperty(&quot;os.name&quot;)
    val targetOs = when {
        osName == &quot;Mac OS X&quot;       -&gt; &quot;macos&quot;
        osName.startsWith(&quot;Win&quot;  ) -&gt; &quot;windows&quot;
        osName.startsWith(&quot;Linux&quot;) -&gt; &quot;linux&quot;
        else                       -&gt; error(&quot;Unsupported OS: $osName&quot;)
    }

    val targetArch = when (val osArch = System.getProperty(&quot;os.arch&quot;)) {
        &quot;x86_64&quot;, &quot;amd64&quot; -&gt; &quot;x64&quot;
        &quot;aarch64&quot;         -&gt; &quot;arm64&quot;
        else              -&gt; error(&quot;Unsupported arch: $osArch&quot;)
    }

    return &quot;${targetOs}-${targetArch}&quot;
}</code>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The gradle build uses <a href="https://docs.gradle.org/current/userguide/version_catalogs.html" target="_blank" rel="noopener noreferrer">gradle version catalogs</a>; see <a href="https://github.com/nacular/doodle-tutorials/blob/master/gradle/libs.versions.toml" target="_blank" rel="noopener noreferrer">libs.versions.toml</a> file for library info.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-application">The Application<a href="#the-application" class="hash-link" aria-label="Direct link to The Application" title="Direct link to The Application">​</a></h2>
<p>All Doodle apps must implement the <a href="https://nacular.github.io/doodle/docs/applications" target="_blank" rel="noopener noreferrer"><code>Application</code></a> interface. The framework will then initialize our app via the constructor. Our app will be fairly simple: just create an instance of our calculator and add it to the display.</p>
<p>Doodle apps can be defined in <code>commonMain</code>, since they do not require any platform-specific dependencies (we will do this as well). They can also be <a href="https://nacular.github.io/doodle/docs/applications" target="_blank" rel="noopener noreferrer">launched</a> in a few different ways on Web and Desktop. Use the <code>application</code> function in a platform source-set (i.e. <code>jsMain</code>, <code>jvmMain</code>, etc.) to launch top-level apps. It takes a list of modules to load and a lambda that builds the app. This lambda is within a Kodein injection context, which means we can inject dependencies into our app via <code>instance</code>, <code>provider</code>, etc.</p>
<p><a href="https://github.com/nacular/doodle-tutorials/blob/master/TabStrip/src/commonMain/kotlin/io/nacular/doodle/examples/TabStripApp.kt#L11" target="_blank" rel="noopener noreferrer"><strong>TabStripApp.kt</strong></a></p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.examples

import io.nacular.doodle.animation.Animator
import io.nacular.doodle.application.Application
import io.nacular.doodle.core.Display
import io.nacular.doodle.geometry.PathMetrics
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.layout.constraints.center
import io.nacular.doodle.layout.constraints.constrain

/**
 * Simple app that places a [TabStrip] at the center of the display.
 */
//sampleStart
class TabStripApp(display: Display, animator: Animator, pathMetrics: PathMetrics): Application {
    init {
        // creat and display a single TabStrip
        with(display) {
            this += TabStrip(animator, pathMetrics).apply {
                suggestSize(Size(375, 100))
            }

            layout = constrain(first(), center)
        }
    }

    override fun shutdown() { /* no-op */ }
}
//sampleEnd</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Notice that <code>shutdown</code> is a no-op, since we don&#x27;t have any cleanup to do when the app closes.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-tabstrip-view">The TabStrip View<a href="#the-tabstrip-view" class="hash-link" aria-label="Direct link to The TabStrip View" title="Direct link to The TabStrip View">​</a></h2>
<p>This tutorial will implement the <code>TabStrip</code> as a single <a href="https://nacular.github.io/doodle/docs/views" target="_blank" rel="noopener noreferrer"><code>View</code></a> that manages its state directly. This lets us focus on the animation logic.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>A production version of this control would be more flexible if it let you pass in the items in the tab and configure what each does when clicked.</p></div></div>
<p>The <code>TabStrip</code> is composed of a rounded rectangle background (with a drop-shadow), a row of items rendered using paths, an indicator that looks like a wave, and a droplet that appears during a new tab selection. All of these elements are rendered directly onto the <code>TabStrip</code>&#x27;s canvas, so there are no child <code>View</code>s involved for this approach.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="render-logic">Render Logic<a href="#render-logic" class="hash-link" aria-label="Direct link to Render Logic" title="Direct link to Render Logic">​</a></h3>
<p>All parts of the view are rendered in <code>TabStrip.render</code>, which is how all Views draw themselves.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">
override fun render(canvas: Canvas) {
  val foreGround = (foregroundColor ?: Black).paint
  val backGround = (backgroundColor ?: White).paint

  // draw shadow
  canvas.outerShadow(color = Black opacity 0.1f, blurRadius = 20.0) {
      // draw background rounded rect
      canvas.rect(bounds.atOrigin, radius = cornerRadius, fill = backGround)
  }

  // draw items
  items.forEach { item -&gt;
      val itemScale = 1 - itemScaleChange * item.moveProgress

      // position and scale the item
      canvas.transform(Identity.
          translate(Point(item.x, item.y + itemDipOffset * item.moveProgress)).
          scale(around = Point(item.width / 2, item.height / 2), itemScale, itemScale)) {

          when (item.selectionProgress) {
              1f   -&gt; path(item.selected, fill = foreGround) // fully selected
              else -&gt; {
                  path(item.deselected, fill = foreGround)

                  if (item.selectionProgress &gt; 0f) {
                      // overlay transition if partially selected
                      val dropletCircle = Circle(
                          center = Point(item.width / 2, item.height - dropLetRadius),
                          radius = dropLetRadius + (max(item.width, item.height) - dropLetRadius) * item.selectionProgress
                      )

                      // overlay background fill so it seeps through holes in item
                      circle(dropletCircle, fill = backGround)

                      // draw selected item clip to droplet
                      clip(dropletCircle) {
                          path(item.selected, fill = foreGround)
                      }
                  }
              }
          }
      }
  }

  canvas.translate(indicatorCenter) {
      // draw indicator
      path(indicatorPath, fill = foreGround)

      if (dropletYAboveIndicator != 0.0) {
          // draw droplet so that it&#x27;s top is at the indicator top when dropletYAboveIndicator == 0
          circle(Circle(
              radius = dropLetRadius,
              center = Point(0, -indicatorHeight + dropLetRadius - dropletYAboveIndicator)
          ), fill = foreGround)
      }
  }
}
</code>
<p>Notice that the icons and indicator are all drawn after the canvas has been transformed. That is because paths are fixed in space (in our case they are all anchored at <code>0,0</code>) and moving them around on a Canvas requires a transform.</p>
<p>You can also see that each icon can be in 1 of 3 states: <em>deselected</em>, <em>partially selected</em>, <em>fully selected</em>. In the first and last case, only the respective path is drawn. But in the transitional state, both paths are drawn, with the selected path being clipped to the droplet circle. We also need to change the background color that leaks through the holes of the path. So a filler circle is drawn before the selected path with the current background fill.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Many of the parameters used in <code>render</code> are ones we will animate (i.e. <code>icon.moveProgress</code>, <code>icon.selectionProgress</code>, <code>indicatorCenter</code>, <code>dropletYAboveIndicator</code>, etc.). Therefore, animation can simply trigger renders to ensure the <code>TabStrip</code> always reflects the changes on every tick.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="triggering-the-animation">Triggering The Animation<a href="#triggering-the-animation" class="hash-link" aria-label="Direct link to Triggering The Animation" title="Direct link to Triggering The Animation">​</a></h3>
<p>This component has a complex set of animations that will trigger in a specific sequence to achieve the final look. We will use an injected <code>Animator</code> names <code>animate</code> to perform all animations. And we will tie animations to click events that select a new item.</p>
<p>The first thing we&#x27;ll do is track the <code>selectedItem</code> as an <code>observable</code> property so we can trigger animations when it changes:</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">private var selectedItem by observable(items.first()) { _,selected -&gt; ... }</code>
<p>This item will be initialized to the first item in our list. That list will simply be hard-coded for this tutorial. It tracks data for each item in a simple data object.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">
private inner class ItemState(val selected: Path, val deselected: Path, var selectionProgress: Float = 0f) {
  val x          get() = position.x
  val y          get() = position.y
  val width      get() = size.width
  val height     get() = size.height
  val centerX    get() = x + width / 2
  val size             = pathMetrics.size(selected)
  val atDefaults get() = selectionProgress == 0f &amp;&amp; moveProgress == 0f

  lateinit var position     : Point
           var moveProgress = 0f
}
</code>
<p>The user is able to change <code>selectedItem</code> by clicking on it with the Pointer. We track this by listening to click events on the view directly and deciding which item is selected. We also listen for pointer move events to handle the dynamic cursor, which shows a Pointer when hovering over a non-selected item.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">
init {
  // ...

  // Listen for item clicks
  pointerChanged += clicked { event -&gt;
      getItem(at = event.location)?.let {
          selectedItem = it
          cursor       = Default
      }
  }

  // Update cursor as pointer moves
  pointerMotionChanged += moved { event -&gt;
      cursor = when (getItem(event.location)) {
          selectedItem, null -&gt; Default
          else               -&gt; Pointer
      }
  }
}
</code>
<p>The result is that clicking on an item other than <code>selectedItem</code> will trigger our observable callback, which is where we do our animation handling.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="animation-timeline">Animation Timeline<a href="#animation-timeline" class="hash-link" aria-label="Direct link to Animation Timeline" title="Direct link to Animation Timeline">​</a></h3>
<p>This is what the full animation timeline looks like. The diagram shows the sequence of events and their timings (to scale).</p>
<p><img decoding="async" loading="lazy" src="/doodle-tutorials/assets/images/animation-full-175d8ba743d7cd7e4b33c83d5d9e09c3.png" width="1920" height="978" class="img_ev3q"></p>
<p>There are a few important things to note about our approach. First is that we are using an animation block and tracking several top-level animations that will run concurrently via <code>animations</code>. This allows us to auto-cancel them whenever a new animation starts. We accomplish this by defining <code>animations</code> as an <code>autoCanceling</code> property</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">private var animation: Animation&lt;*&gt;? by autoCanceling()</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Use the <code>autoCanceling</code> delegate to get free animation cleanup whenever a new value is assigned to an old one.</p></div></div>
<p>Secondly, our approach initiates a lot of follow-on animations at the completion of previous animations (bubbles that come after others). These are triggered using the <code>then</code> method on the animation they follow. This allows them to be tracked by our top-level animation block and they are only created when the previous animation completes.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Doodle&#x27;s animation block captures any animations created while the block is being executed and groups them all under a single animation returned from the block. In the following example, all the animations will be tied to <code>animations</code>, so canceling it cancels everything.</p><p><strong>All animations rolled into the result</strong></p><code theme="darcula" mode="kotlin" data-highlight-only="true">
val animations = animate {
  0f to 1f (using tweenFloat(...)) {}
  a  to b  (using tweenColor(...)) {} then {
      ...
  }

  subAnimation = animate {
      ...
  }
}
</code><p>NOTE that you must use <code>then</code> if you&#x27;d like to create subsequent animations at the completions of others. Doing the following <strong>will not</strong> track the animation created in the <code>completed</code> callback.</p><p><strong>Some animations not tracked</strong></p><code theme="darcula" mode="kotlin" data-highlight-only="true">
val animations = animate {
  (0f to 1f using tweenFloat(...).invoke {}).apply {
      completed += {
          // this one not, since it is created after the animate block is finished
          a  to b  using tweenColor(...).invoke {}
      }
  }
}
</code></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="animation-logic">Animation Logic<a href="#animation-logic" class="hash-link" aria-label="Direct link to Animation Logic" title="Direct link to Animation Logic">​</a></h3>
<p>The following code has all of the logic to cancel anything that is ongoing when it fires and setup the timeline.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">
private var selectedItem by observable(items.first()) { _,selected -&gt;
  // hide droplet
  dropletYAboveIndicator = 0.0

  // Animation blocks roll all top-level animations (those created while in the block) into a common
  // parent animation. Canceling that animation cancels all the children.
  animation = animate {
      // All deselected items move back to normal
      items.filter { it != selected &amp;&amp; !it.atDefaults }.forEach { deselected -&gt;
          deselected.moveProgress      to 0f using (tweenFloat(linear, itemMoveUpDuration)) { deselected.moveProgress      = it }
          deselected.selectionProgress to 0f using (tweenFloat(linear, itemFillDuration  )) { deselected.selectionProgress = it }
      }

      // Indicator moves to selected item
      indicatorCenter.x to selected.centerX using (tweenDouble(easeInOutCubic, slideDuration)) { indicatorCenter = Point(it, height) } then {
          // Selected item moves down
          selected.moveProgress to 1f using (tweenFloat(linear, itemMoveDownDuration)) { selected.moveProgress = it }
      }

      // Indicator primes as it travels to selected item
      indicatorHeight to minIndicatorHeight using (tweenDouble(linear, primeDuration)) { indicatorHeight = it } then {
          // Indicator fires at selected item
          indicatorHeight to maxIndicatorHeight using (tweenDouble(linear, fireDuration)) { indicatorHeight = it } then {
              // Indicator height returns to normal
              indicatorHeight to defaultIndicatorHeight using (tweenDouble(linear, recoilDuration)) { indicatorHeight = it }

              // Droplet moves up to item
              dropletYAboveIndicator to dropletMaxY using (tweenDouble(linear, dropletTravelDuration)) { dropletYAboveIndicator = it } then {
                  // Droplet is instantly hidden
                  dropletYAboveIndicator = 0.0

                  // Selected item moves up
                  selected.moveProgress to 0f using (tweenFloat(linear, itemMoveUpDuration)) { selected.moveProgress = it }

                  // Selected item animates droplet within it
                  selected.selectionProgress to 1f using (tweenFloat(linear, itemFillDuration)) { selected.selectionProgress = it }
              }
          }
      }
  }
}
</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rendering-on-animation">Rendering On Animation<a href="#rendering-on-animation" class="hash-link" aria-label="Direct link to Rendering On Animation" title="Direct link to Rendering On Animation">​</a></h3>
<p>Our animations change many internal variables as they update. These variables all affect how the control is rendered, and therefore need to trigger re-render so their states are constantly in sync with what the control shows at any moment. One option is to have these variables be <code>renderProperty</code>s. This would trigger a render call whenever any of them is changed. This approach is fine for cases where only a small number of properties will change at a time; then the number of render calls remains low. Doodle does queue calls to <code>rerender</code>, but its best to avoid making those calls to begin with if possible.</p>
<p>So we take a different approach. The <code>Animator</code> interface lets you listen to changes to active animations. These events are fired in bulk whenever any animations change, complete, or are canceled. This is a great way to take action at low cost. The code for this is as follows:</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">
init {
  // ...

  // Rerender on animation updates
  animate.listeners += object: Listener {
      override fun changed(animator: Animator, animations: Set&lt;Animation&lt;*&gt;&gt;) {
          rerenderNow() // only called once per animation tick
      }
  }

  // ...
}
</code>
<p>With this, our component will render itself and listen to pointer events so it can trigger animations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="potential-improvements">Potential Improvements<a href="#potential-improvements" class="hash-link" aria-label="Direct link to Potential Improvements" title="Direct link to Potential Improvements">​</a></h2>
<p>We focused on the animation logic in this tutorial, but there are other things the <code>TabStrip</code> needs to manage given how we&#x27;ve chosen to implement it. These include managing how all the items it draws are positioned relative to its own size.</p>
<p>The approach we chose requires the component to recalculate the offsets of all paths it draws whenever its size changes. That&#x27;s because everything drawn during render is absolutely positioned on the canvas.</p>
<p>A more production-ready approach might have the component only draw the indicator on its canvas, while having the items as child views. Then it could use a <a href="https://nacular.github.io/doodle/docs/layout/overview" target="_blank" rel="noopener noreferrer"><code>Layout</code></a> to keep the item positions up to date. Of course, that <code>layout</code> would need to participate in the animation and incorporate the animating values into its positioning logic. But this approach would scale better and allow the control to house a more dynamic set of items.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doodle-tutorials/docs/timedcards"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Timed Cards</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doodle-tutorials/docs/contacts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contacts</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-setup" class="table-of-contents__link toc-highlight">Project Setup</a></li><li><a href="#the-application" class="table-of-contents__link toc-highlight">The Application</a></li><li><a href="#the-tabstrip-view" class="table-of-contents__link toc-highlight">The TabStrip View</a><ul><li><a href="#render-logic" class="table-of-contents__link toc-highlight">Render Logic</a></li><li><a href="#triggering-the-animation" class="table-of-contents__link toc-highlight">Triggering The Animation</a></li><li><a href="#animation-timeline" class="table-of-contents__link toc-highlight">Animation Timeline</a></li><li><a href="#animation-logic" class="table-of-contents__link toc-highlight">Animation Logic</a></li><li><a href="#rendering-on-animation" class="table-of-contents__link toc-highlight">Rendering On Animation</a></li></ul></li><li><a href="#potential-improvements" class="table-of-contents__link toc-highlight">Potential Improvements</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Nacular</div></div></div></footer></div>
</body>
</html>